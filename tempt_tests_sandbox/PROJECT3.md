PROJECT.md: ボートレース「2連対」的中精度比較プロジェクト
## コンセプト

「1着・2着（2連対）」を当てることに特化し、自作モデルの予測精度を公式のコンピューター予想や**オッズ（市場支持率）**と比較・検証する。
単なる的中率だけでなく、「市場が過小評価している2着」を炙り出すことを最終目標とする。
## 予測のターゲット（Target Variable）

    目的変数: 各艇の「2着以内（2連対）」フラグ

        1: 1着または2着で入線

        0: 3着以下（着外）

    予測形式:

        各艇が2着以内に入る確率（0.0〜1.0）を算出し、上位2艇を抽出する。

## 入力特徴量（Features）- 検討リスト

AIエージェントに実装・検討させる項目：

    コース別実績: 選手ごとの「該当コースでの2連対率」。

    機力指標: モーター2連率、および展示タイム順位。

    直前気象: 風速、波高、安定板の使用有無。

    選手属性: 級別（A1~B2）、今節成績（リズム）、平均ST。

    不一致指標: 展示タイムの順位と、勝率順位の「ズレ」（掘り出し物の特定用）。

## 比較ベンチマーク（競合）

自分のモデルの出力結果を以下の3点と照合する：

    公式コンピューター予想: 公式サイトが提供する2連単/3連単予想。

    人気順（支持率）: 締切直前オッズから逆算される「大衆の予測」。

    1-2固定: 最も出現率の高い「1コース1着-2コース2着」という定石。

## 開発ロードマップ

    [Data]: pyjpboatrace を用いて、特定会場（例：大村、平和島など）の過去3年分の「番組表」と「結果」を取得。

    [Preprocess]: 欠損値（欠場など）の処理と、コース別成績の集計。

    [Modeling]: LightGBMを用いた二値分類（2連対するか否か）。

    [Inference]: 明日のレース、あるいは直近のレースを対象に推論を実行し、公式予想と並べて表示。

## 決定するべきこと（抜け漏れチェック）
### 対象会場の絞り込み

    [ ] 全24場を対象にするか、特定の場に絞るか: (推奨: まずはインが強く傾向が安定している「大村」や、データ数が多い「住之江」などでベースラインを作る)

### 学習データの期間

    [ ] どの程度の期間を使用するか: (推奨: モーターの個体差の影響を抑えるため、直近1〜2年分から開始)

### 直前情報の取得タイミング

    [ ] 展示データを含めるか: 展示タイムは予測に極めて重要ですが、リアルタイム予測の場合は「レース開始数十分前」の取得処理が必要になります。

## データの保存について
データはCSVファイルで保存して動かします。保存するカラムは以下です。
1. レース基本情報 (races.csv)
「いつ、どこで、どんなレースがあったか」を記録します。

ファイル名: races.csv
列: date, stadium_id, race_no, title, deadline ...
2. 出走表データ (entries.csv)
1レースにつき6人分の詳細データです。これが予測AIを作る一番の「メシの種」になります。

ファイル名: entries.csv
列: date, stadium_id, race_no, boat_no (艇番), racer_id, name, class (階級), motor_p (モーター連対率), st_ave (平均ST), fl (フライング回数) ...
3. 結果・配当データ (results.csv)
レースが終わった後の正解データです。

ファイル名: results.csv
列: date, stadium_id, race_no, rank1_boat, rank2_boat, rank3_boat, payoff_3t (3連単配当), win_method (決まり手) ...

4. オッズデータ (odds.csv)
これは当分作成しません。(レースの開始直前にガラリと変わるデータで、 データ量が膨大になるため)




## ログ・意思決定履歴

    2026-02-19: プロジェクト発足。

    2026-02-19: ターゲットを「2着以内（2連対）」に設定。公式予想との比較を主眼に置く。